# PHP CircleCI 2.0 configuration file
#
# Check https://circleci.com/docs/2.0/language-php/ for more details
#
version: 2.1
executors:
  my-custom-executor:
    docker:
      - image: cimg/php:7.4.22-node
      
jobs:
  php74:
    executor: my-custom-executor
    steps:
      - checkout
      - run: COMPOSER_OPTIONS="--no-suggest --no-interaction"
      - run: COMPOSER_PROCESS_TIMEOUT=0
      - run: DEPENDENCIES=" "
      - run: composer update $COMPOSER_OPTIONS
      - run: composer require guzzlehttp/guzzle:^6.3.0 --update-with-dependencies $DEPENDENCIES
      - run: composer show

      - run: composer analyze
      - run: composer test
      - run: composer metrics
      - run: bash <(curl -s https://codecov.io/bash) -f ./clover.xml

workflows:
  my-custom-workflow:
    jobs:
      - php74